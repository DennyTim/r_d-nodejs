# Homework 4

> Coffee Brew Log API โ productionโready ะผัะฝัะผัะผ

---

## ๐ ะกัััะบัััะฐ

```
hw4/
โโโ src/
โ   โโโ app/
โ   โ   โโโ containers/     # IoC ะบะพะฝัะตะนะฝะตัะธ
โ   โ   โโโ controllers/    # ััะบะฝััั ะพะฑัะพะฑะบะธ ะทะฐะฟะธััะฒ ะฒัะด ัะพัััะฒ 
โ   โ   โโโ docs/           # ะณะตะฝะตัะฐััั ัะฟะตะบั ััะฝัััะพะณะพ ััะฝะบััะพะฝะฐะปั
โ   โ   โโโ dto/            # ัะต ััััะบัััะฐ ัะบะฐ ะพะฟะธััั ัะพัะผั ะดะฐะฝะธั ะท zod ะฒะฐะปัะดะฐัััั
โ   โ   โโโ middlewares/    # ััะฝะบััั, ัะบั ะฒะธะบะพะฝัััััั ะผัะถ ะทะฐะฟะธัะพะผ ัะฐ ัะพััะธะฝะณะพะผ
โ   โ   โโโ models/         # ะผะพะดะตะปั ะดะปั ัะฟัะฐะฒะปัะฝั ะดะฐะฝะธะผะธ
โ   โ   โโโ open-api/       # ัะตััััะฐััั ััะตะผ ะท DTO ั path, ัะบ ะพะฟะธะฝััััั ะฒ ะพะดะฝะพะผั ะณะปะพะฑะฐะปัะฝะพะผั registry
โ   โ   โโโ routes/         # ัะพัััะฝะณ
โ   โ   โโโ services/       # ัะตัะฒััะธ ะดะปั ัะพะฑะพัะธ ะท ะผะพะดะตะปัะผะธ
โ   โ   โโโ static/         # ััะฝะบััั ัะฟัะฐะฒะปัะฝะฝั ััะฐัะธะบะพั
โ   โ   โโโ app.js          # ะตะฝััั ะฟะพัะฝั Express
โ   โโโ config/             
โ   โ   โโโ index.js        # ัะตะฝััะฐะปัะทะพะฒะฐะฝะธะน ะพะฑโัะบั cfg
โ   โโโ utils/              # ััะธะปัะฝั ััะฝะบััั
โ   โโโ build.mjs           # ะตะฝััั ะฟะพัะฝั ะดะปั ะทะฑััะบะธ ัะตัะตะท esbuild 
โ   โโโ server.js           # ะตะฝััั ะฟะพัะฝั Node.js
โโโ src
โโโ .dockerignore           # ัะณะฝะพั ัะฐะนะปัะฒ ั ะดะธัะตะบัะพััะน ัะบั ะฟะพััะฐะฟะปััั ะฒ ะบัะฝะตัะฝะธะน image
โโโ .env.example            # ะฟัะธะบะปะฐะด ะทะผัะฝ ะพัะพัะตะฝะฝั
โโโ .eslintrc.js            # ัะฐะนะป ะบะพะฝััะณ ะปัะฝัั
โโโ multi.Dockerfile        # ัะฐะนะป ะบะพะฝััะณ ะดะพะบะตัั

````

---

## ๐ ะจะฒะธะดะบะธะน ััะฐัั

```bash
git clone <repo> && cd r_d-nodejs

# ๐ 1 - ะดะปั ะทะฐะฟััะบั ะฒ ัะตะถะธะผั development

cd hw4 && npm install     # ััะฐะฒะธะผะพ ะทะฐะปะตะถะฝะพััั
npm run dev               # ะทะฐะฟััะบ ะฒ dev ัะตะถะธะผั (ะฒ .env ะฟะพััะฐะฒะธัะธ NODE_ENV=development)

# ๐ 2 - ะดะปั ะทะฐะฟััะบั ะฒ ัะตะถะธะผั production

cd hw4 && npm install     # ััะฐะฒะธะผะพ ะทะฐะปะตะถะฝะพััั
npm run build             # ะทะฑััะบะฐ ะฟัะพะตะบัั
npm run start             # ะทะฐะฟััะบ ะฒ prod ัะตะถะธะผั (ะฒ .env ะฟะพััะฐะฒะธัะธ NODE_ENV=production)

# ๐ 3 - ะดะปั ะทะฐะฟััะบั ะฒ docker

npm run docker:build
npm run docker:run

# ๐ 4 - ะดะปั ะพัะธััะบะธ ะบะพะฝัะตะนะฝะตัั ั ัะผะตะดะถั ะฒ docker
docker rm -f $(docker ps -aq --filter "ancestor=brew-api") && docker rmi brew-api
````
---

## ๐ ะะผัะฝะฝั ัะตัะตะดะพะฒะธัะฐ ะฒะบะฐะทะฐะฝั ะฒ multi.Dockerfile

| ะะปัั       | ะัะธะบะปะฐะด                        | ะะฟะธั                                |
|------------|--------------------------------|-------------------------------------|
| `NODE_ENV` | `development` or `production`  | ะฒัะดะฟะพะฒัะดะฐั ะทะฐ ัะตะถะธะผ ะทะฐะฟััะบั ัะตัะฒะตัั |
| `PORT`     | `3000`                         | ะฟะพัั ะดะปั brew-api                   |                               

> **ะะปั ะปะพะบะฐะปัะฝะพะณะพ ะทะฐะฟััะบั ะฟะพัััะฑะฝะพ ััะฒะพัะธัะธ `.env`!** ะคะฐะนะป ะฒะถะต ั `.gitignore`.
---
